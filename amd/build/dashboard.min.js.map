{"version":3,"file":"dashboard.min.js","sources":["../src/dashboard.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Chart data JS module.\n *\n * @module     local_assessfreq/dashboard\n * @package\n * @copyright  Simon Thornett <simon.thornett@catalyst-eu.net>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nexport const init = () => {\n\n    // Create the course search filter.\n    require(['core/form-autocomplete', 'core/str'], function(Autocomplete, Str) {\n        Str.get_string('courseselect', 'local_assessfreq').then((loading) => {\n            Autocomplete.enhance(\n                '#local-assessfreq-course-filter',\n                false,\n                'local_assessfreq/course_selector',\n                loading,\n                false,\n                true,\n            );\n            const course_filter = document.getElementById(\"local-assessfreq-course-filter\");\n            course_filter.addEventListener('change', event => {\n                let courseid = event.target.value;\n                let url = new URL(window.location);\n                url.searchParams.set('courseid', courseid);\n                window.location = url;\n            });\n        });\n    });\n\n    // Load the tab functionality.\n    tabs();\n\n};\n\nconst tabs = () => {\n\n    const tabcontent = document.getElementsByClassName(\"tablinks\");\n\n    tabcontent.forEach(el => el.addEventListener('click', event => {\n        let target = event.target.dataset.target;\n\n        let tabcontent = document.getElementsByClassName(\"tabcontent\");\n        for (let i = 0; i < tabcontent.length; i++) {\n            tabcontent[i].style.display = \"none\";\n        }\n\n        // Get all elements with class=\"tablinks\" and remove the class \"active\"\n        let tablinks = document.getElementsByClassName(\"tablinks\");\n        for (let i = 0; i < tablinks.length; i++) {\n            tablinks[i].className = tablinks[i].className.replace(\" active\", \"\");\n        }\n\n        // Show the current tab, and add an \"active\" class to the button that opened the tab\n        document.getElementById(target).style.display = \"block\";\n        event.currentTarget.className += \" active\";\n    }));\n\n    const currentUrl = document.URL;\n    const urlParts = currentUrl.split('#');\n\n    const anchor = (urlParts.length > 1) ? urlParts[1] : null;\n    // First tab should be open by default unless we have an anchor.\n    if (!anchor || document.querySelector('[data-target=\"tab-' + anchor + '\"]') === null) {\n        document.querySelector('[data-target=\"tab-heatmap\"]').click();\n    } else {\n        document.querySelector('[data-target=\"tab-' + anchor + '\"]').click();\n    }\n};\n"],"names":["require","Autocomplete","Str","get_string","then","loading","enhance","document","getElementById","addEventListener","event","courseid","target","value","url","URL","window","location","searchParams","set","tabs","getElementsByClassName","forEach","el","dataset","tabcontent","i","length","style","display","tablinks","className","replace","currentTarget","urlParts","split","anchor","querySelector","click"],"mappings":"+JAwBoB,KAGhBA,QAAQ,CAAC,yBAA0B,aAAa,SAASC,aAAcC,KACnEA,IAAIC,WAAW,eAAgB,oBAAoBC,MAAMC,UACrDJ,aAAaK,QACT,mCACA,EACA,mCACAD,SACA,GACA,GAEkBE,SAASC,eAAe,kCAChCC,iBAAiB,UAAUC,YACjCC,SAAWD,MAAME,OAAOC,MACxBC,IAAM,IAAIC,IAAIC,OAAOC,UACzBH,IAAII,aAAaC,IAAI,WAAYR,UACjCK,OAAOC,SAAWH,aAM9BM,cAIEA,KAAO,KAEUb,SAASc,uBAAuB,YAExCC,SAAQC,IAAMA,GAAGd,iBAAiB,SAASC,YAC9CE,OAASF,MAAME,OAAOY,QAAQZ,OAE9Ba,WAAalB,SAASc,uBAAuB,kBAC5C,IAAIK,EAAI,EAAGA,EAAID,WAAWE,OAAQD,IACnCD,WAAWC,GAAGE,MAAMC,QAAU,WAI9BC,SAAWvB,SAASc,uBAAuB,gBAC1C,IAAIK,EAAI,EAAGA,EAAII,SAASH,OAAQD,IACjCI,SAASJ,GAAGK,UAAYD,SAASJ,GAAGK,UAAUC,QAAQ,UAAW,IAIrEzB,SAASC,eAAeI,QAAQgB,MAAMC,QAAU,QAChDnB,MAAMuB,cAAcF,WAAa,qBAI/BG,SADa3B,SAASQ,IACAoB,MAAM,KAE5BC,OAAUF,SAASP,OAAS,EAAKO,SAAS,GAAK,KAEhDE,QAA2E,OAAjE7B,SAAS8B,cAAc,qBAAuBD,OAAS,MAGlE7B,SAAS8B,cAAc,qBAAuBD,OAAS,MAAME,QAF7D/B,SAAS8B,cAAc,+BAA+BC"}