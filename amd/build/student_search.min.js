define ("local_assessfreq/student_search",["jquery","core/notification","local_assessfreq/override_modal","local_assessfreq/table_handler","local_assessfreq/user_preferences"],function(a,b,c,d,e){var f={},g,h=4,i=1,j=60,k,l=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:!0,b=document.getElementById("local-assessfreq-period-progress");if(!0===a){clearInterval(k);k=null;b.setAttribute("style","width: 100%");b.setAttribute("aria-valuenow",100)}if(k){return}k=setInterval(function(){var a=b.getAttribute("aria-valuenow"),c=100/j;if(0<a-c){b.setAttribute("style","width: "+(a-c)+"%");b.setAttribute("aria-valuenow",a-c)}else{clearInterval(k);k=null;b.setAttribute("style","width: 100%");b.setAttribute("aria-valuenow",100);d.getTable(0,[h,i],null);l()}},1e3)},m=function(a){a.preventDefault();if("a"===a.target.tagName.toLowerCase()){var c=a.target.dataset.metric;e.setUserPreference("local_assessfreq_student_search_table_hoursahead_preference",c).then(function(){h=c;d.getTable(0,[h,i],null)}).fail(function(){b.exception(new Error("Failed to update user preference: hours ahead"))})}},n=function(a){a.preventDefault();if("a"===a.target.tagName.toLowerCase()){var c=a.target.dataset.metric;e.setUserPreference("local_assessfreq_student_search_table_hoursbehind_preference",c).then(function(){i=c;d.getTable(0,[h,i],null)}).fail(function(){b.exception(new Error("Failed to update user preference: hours behind"))})}},o=function(a){a.preventDefault();var b=a.target;if(null!==b.closest("button")&&"local-assessfreq-refresh-quiz-dashboard"===b.closest("button").id){l(!0);d.getTable(0,[h,i],null)}else if("a"===b.tagName.toLowerCase()){j=b.dataset.period;l(!0);e.setUserPreference("local_assessfreq_quiz_refresh_preference",j)}};f.init=function(f){g=f;d.init(0,g,"local-assessfreq-student-search-table","local-assessfreq-student-search","get_student_search_table","local_assessfreq_student_search_table_rows_preference","local-assessfreq-quiz-student-table-search","local_assessfreq_student_search_table","local_assessfreq_set_table_preference");var j=document.getElementById("local-assessfreq-quiz-student-table-search"),k=document.getElementById("local-assessfreq-quiz-student-table-search-reset"),l=document.getElementById("local-assessfreq-quiz-student-table-rows"),p=document.getElementById("local-assessfreq-quiz-student-table-hoursahead"),q=document.getElementById("local-assessfreq-quiz-student-table-hoursbehind"),r=document.getElementById("local-assessfreq-period-container");j.addEventListener("keyup",d.tableSearch);j.addEventListener("paste",d.tableSearch);k.addEventListener("click",d.tableSearchReset);l.addEventListener("click",d.tableSearchRowSet);p.addEventListener("click",m);q.addEventListener("click",n);r.addEventListener("click",o);a.when(e.getUserPreference("local_assessfreq_student_search_table_hoursahead_preference").then(function(a){h=a.preferences[0].value?a.preferences[0].value:4}).fail(function(){b.exception(new Error("Failed to get use preference: hoursahead"))}),e.getUserPreference("local_assessfreq_student_search_table_hoursbehind_preference").then(function(a){i=a.preferences[0].value?a.preferences[0].value:1}).fail(function(){b.exception(new Error("Failed to get use preference: hoursahead"))})).done(function(){d.getTable(0,[h,i],null);c.init(f,d.getTable,[h,i])})};return f});
//# sourceMappingURL=student_search.min.js.map
