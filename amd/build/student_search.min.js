define ("local_assessfreq/student_search",["core/ajax","core/fragment","core/notification","local_assessfreq/override_modal","local_assessfreq/table_handler","local_assessfreq/user_preferences"],function(a,b,c,d,e,f){var g={},h,i=4,j=1,k=60,l,m=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:!0,b=document.getElementById("local-assessfreq-period-progress");if(!0===a){clearInterval(l);l=null;b.setAttribute("style","width: 100%");b.setAttribute("aria-valuenow",100)}if(l){return}l=setInterval(function(){var a=b.getAttribute("aria-valuenow"),c=100/k;if(0<a-c){b.setAttribute("style","width: "+(a-c)+"%");b.setAttribute("aria-valuenow",a-c)}else{clearInterval(l);l=null;b.setAttribute("style","width: 100%");b.setAttribute("aria-valuenow",100);e.getTable(0,[i,j],null);m()}},1e3)},n=function(a){a.preventDefault();if("a"===a.target.tagName.toLowerCase()){var b=a.target.dataset.metric;f.setUserPreference("local_assessfreq_student_search_table_hoursahead_preference",b).then(function(){i=b;e.getTable(0,[i,j],null)}).fail(function(){c.exception(new Error("Failed to update user preference: hours ahead"))})}},o=function(a){a.preventDefault();if("a"===a.target.tagName.toLowerCase()){var b=a.target.dataset.metric;f.setUserPreference("local_assessfreq_student_search_table_hoursbehind_preference",b).then(function(){j=b;e.getTable(0,[i,j],null)}).fail(function(){c.exception(new Error("Failed to update user preference: hours behind"))})}},p=function(a){a.preventDefault();var b=a.target;if(null!==b.closest("button")&&"local-assessfreq-refresh-quiz-dashboard"===b.closest("button").id){m(!0);e.getTable(0,[i,j],null)}else if("a"===b.tagName.toLowerCase()){k=b.dataset.period;m(!0);f.setUserPreference("local_assessfreq_quiz_refresh_preference",k)}};g.init=function(a){h=a;e.init(0,h,"local-assessfreq-student-search-table","local-assessfreq-student-search","get_student_search_table","local_assessfreq_student_search_table_rows_preference","local-assessfreq-quiz-student-table-search","local_assessfreq_student_search_table","local_assessfreq_set_table_preference");var b=document.getElementById("local-assessfreq-quiz-student-table-search"),g=document.getElementById("local-assessfreq-quiz-student-table-search-reset"),k=document.getElementById("local-assessfreq-quiz-student-table-rows"),l=document.getElementById("local-assessfreq-quiz-student-table-hoursahead"),m=document.getElementById("local-assessfreq-quiz-student-table-hoursbehind"),q=document.getElementById("local-assessfreq-period-container");b.addEventListener("keyup",e.tableSearch);b.addEventListener("paste",e.tableSearch);g.addEventListener("click",e.tableSearchReset);k.addEventListener("click",e.tableSearchRowSet);l.addEventListener("click",n);m.addEventListener("click",o);q.addEventListener("click",p);f.getUserPreference("local_assessfreq_student_search_table_hoursahead_preference").then(function(a){i=a.preferences[0].value?a.preferences[0].value:4}).fail(function(){c.exception(new Error("Failed to get use preference: hoursahead"))});f.getUserPreference("local_assessfreq_student_search_table_hoursbehind_preference").then(function(b){j=b.preferences[0].value?b.preferences[0].value:1;e.getTable(0,[i,j],null);d.init(a,e.getTable,[i,j])}).fail(function(){c.exception(new Error("Failed to get use preference: hoursbehind"))})};return g});
//# sourceMappingURL=student_search.min.js.map
