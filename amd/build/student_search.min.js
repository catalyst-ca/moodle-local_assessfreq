function _typeof(a){"@babel/helpers - typeof";if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}define ("local_assessfreq/student_search",["exports","jquery","core/notification","local_assessfreq/override_modal","local_assessfreq/table_handler","local_assessfreq/user_preferences"],function(a,b,c,d,e,f){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.init=void 0;b=i(b);c=i(c);d=i(d);e=h(e);f=h(f);function g(){if("function"!=typeof WeakMap)return null;var a=new WeakMap;g=function(){return a};return a}function h(a){if(a&&a.__esModule){return a}if(null===a||"object"!==_typeof(a)&&"function"!=typeof a){return{default:a}}var b=g();if(b&&b.has(a)){return b.get(a)}var c={},d=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var e in a){if(Object.prototype.hasOwnProperty.call(a,e)){var f=d?Object.getOwnPropertyDescriptor(a,e):null;if(f&&(f.get||f.set)){Object.defineProperty(c,e,f)}else{c[e]=a[e]}}}c.default=a;if(b){b.set(a,c)}return c}function i(a){return a&&a.__esModule?a:{default:a}}var j,k=4,l=1,m=60,n,o=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:!0,b=document.getElementById("local-assessfreq-period-progress");if(!0===a){clearInterval(n);n=null;b.setAttribute("style","width: 100%");b.setAttribute("aria-valuenow",100)}if(n){return}n=setInterval(function(){var a=b.getAttribute("aria-valuenow"),c=100/m;if(0<a-c){b.setAttribute("style","width: "+(a-c)+"%");b.setAttribute("aria-valuenow",a-c)}else{clearInterval(n);n=null;b.setAttribute("style","width: 100%");b.setAttribute("aria-valuenow",100);e.getTable(0,[k,l],null);o()}},1e3)},p=function(a){a.preventDefault();if("a"===a.target.tagName.toLowerCase()){var b=a.target.dataset.metric;f.setUserPreference("local_assessfreq_student_search_table_hoursahead_preference",b).then(function(){k=b;e.getTable(0,[k,l],null)}).fail(function(){c.default.exception(new Error("Failed to update user preference: hours ahead"))})}},q=function(a){a.preventDefault();if("a"===a.target.tagName.toLowerCase()){var b=a.target.dataset.metric;f.setUserPreference("local_assessfreq_student_search_table_hoursbehind_preference",b).then(function(){l=b;e.getTable(0,[k,l],null)}).fail(function(){c.default.exception(new Error("Failed to update user preference: hours behind"))})}},r=function(a){a.preventDefault();var b=a.target;if(null!==b.closest("button")&&"local-assessfreq-refresh-quiz-dashboard"===b.closest("button").id){o(!0);e.getTable(0,[k,l],null)}else if("a"===b.tagName.toLowerCase()){m=b.dataset.period;o(!0);f.setUserPreference("local_assessfreq_quiz_refresh_preference",m)}},s=function(a){j=a;e.init(0,j,"local-assessfreq-student-search-table","local-assessfreq-student-search","get_student_search_table","local_assessfreq_student_search_table_rows_preference","local-assessfreq-quiz-student-table-search","local_assessfreq_student_search_table","local_assessfreq_set_table_preference");var g=document.getElementById("local-assessfreq-quiz-student-table-search"),h=document.getElementById("local-assessfreq-quiz-student-table-search-reset"),i=document.getElementById("local-assessfreq-quiz-student-table-rows"),m=document.getElementById("local-assessfreq-quiz-student-table-hoursahead"),n=document.getElementById("local-assessfreq-quiz-student-table-hoursbehind"),o=document.getElementById("local-assessfreq-period-container");g.addEventListener("keyup",e.tableSearch);g.addEventListener("paste",e.tableSearch);h.addEventListener("click",e.tableSearchReset);i.addEventListener("click",e.tableSearchRowSet);m.addEventListener("click",p);n.addEventListener("click",q);o.addEventListener("click",r);b.default.when(f.getUserPreference("local_assessfreq_student_search_table_hoursahead_preference").then(function(a){k=a.preferences[0].value?a.preferences[0].value:4}).fail(function(){c.default.exception(new Error("Failed to get use preference: hoursahead"))}),f.getUserPreference("local_assessfreq_student_search_table_hoursbehind_preference").then(function(a){l=a.preferences[0].value?a.preferences[0].value:1}).fail(function(){c.default.exception(new Error("Failed to get use preference: hoursahead"))})).done(function(){e.getTable(0,[k,l],null);d.default.init(a,e.getTable,[k,l])})};a.init=s});
//# sourceMappingURL=student_search.min.js.map
