define ("local_assessfreq/calendar",["core/str","core/notification"],function(a,b){var c={},d=[{key:"sun",component:"calendar"},{key:"mon",component:"calendar"},{key:"tue",component:"calendar"},{key:"wed",component:"calendar"},{key:"thu",component:"calendar"},{key:"fri",component:"calendar"},{key:"sat",component:"calendar"},{key:"jan",component:"local_assessfreq"},{key:"feb",component:"local_assessfreq"},{key:"mar",component:"local_assessfreq"},{key:"apr",component:"local_assessfreq"},{key:"may",component:"local_assessfreq"},{key:"jun",component:"local_assessfreq"},{key:"jul",component:"local_assessfreq"},{key:"aug",component:"local_assessfreq"},{key:"sep",component:"local_assessfreq"},{key:"oct",component:"local_assessfreq"},{key:"nov",component:"local_assessfreq"},{key:"dec",component:"local_assessfreq"}],e,f=new Date,g=function(a,b){return 32-new Date(b,a,32).getDate()},h=function(a){var b=a.year,c=a.startMonth,d=a.endMonth;return new Promise(function(a,f){for(var g=document.createElement("div"),h=c,k=c,l;k<=d;k++){l=document.createElement("div");l.classList.add("local-assessfreq-month");var m=document.createElement("table"),n=document.createElement("thead"),o=document.createElement("tbody");o.id="calendar-body-"+k;var p=document.createElement("tr"),q=document.createElement("tr"),r=document.createElement("th");r.colSpan=7;r.innerHTML=e[7+h];for(var s=0,j;7>s;s++){j=document.createElement("th");j.innerHTML=e[s];q.appendChild(j)}p.appendChild(r);n.appendChild(p);n.appendChild(q);m.appendChild(n);m.appendChild(o);l.appendChild(m);g.appendChild(l);h++}if("undefined"==typeof b||"undefined"==typeof c||"undefined"==typeof d){f(Error("Failed to create calendar tables."))}else{a({calendarContainer:g,year:b,startMonth:c})}})},j=function(a,b,c){for(var d=new Date(b,c).getDay(),e=1,h=0,k;6>h;h++){k=document.createElement("tr");for(var n=0;7>n;n++){if(0===h&&n<d){var l=document.createElement("td"),m=document.createTextNode("");l.appendChild(m);k.appendChild(l)}else if(e>g(c,b)){break}else{l=document.createElement("td");m=document.createTextNode(e);if(e===f.getDate()&&parseInt(b)===f.getFullYear()&&parseInt(c)===f.getMonth()){l.classList.add("bg-info")}l.appendChild(m);k.appendChild(l);e++}}a.appendChild(k)}},k=function(a){var b=a.calendarContainer,c=a.year,d=a.startMonth;return new Promise(function(a,e){for(var f=b.getElementsByTagName("tbody"),g=d,h=0,k;h<f.length;h++){k=f[h];j(k,c,g);g++}if("undefined"==typeof b){e(Error("Failed to populate calendar tables."))}else{a(b)}})};c.generate=function(c,f,g){return new Promise(function(i,j){var l={year:c,startMonth:f,endMonth:g};a.get_strings(d).catch(function(){b.exception(new Error("Failed to load strings"))}).then(function(a){e=a;return l}).then(h).then(k).then(function(a){if("undefined"!=typeof a){i(a)}else{j(Error("Could not generate calendar"))}})})};return c});
//# sourceMappingURL=calendar.min.js.map
