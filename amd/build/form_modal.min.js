define ("local_assessfreq/form_modal",["core/str","core/modal_factory","core/fragment","core/ajax"],function(a,b,c,d){var e={},f,g,h="<p class=\"text-center\"><i class=\"fa fa-spinner fa-pulse fa-2x fa-fw\"></i></p>",i=new MutationObserver(function ObserverCallback(a){for(var b=function(b){var c=a[b].target;if("span"===c.tagName.toLowerCase()&&c.classList.contains("badge")){c.addEventListener("click",l);document.getElementById("id_quiz").value=2;d.call([{methodname:"local_assessfreq_get_quizzes",args:{query:a[b].target.dataset.value}}])[0].done(function(a){for(var c=JSON.parse(a),d=document.getElementById("id_quiz"),e=d.options.length,f=e-1;0<=f;f--){d.options[b]=null}if(0<c.length){for(var i=0;i<c.length;i++){var g=c[b],h=document.createElement("option");h.textContent=g.name;h.value=g.id;d.appendChild(h)}d.removeAttribute("disabled")}else{document.getElementById("id_quiz").value=1}}).fail(function(){Notification.exception(new Error("Failed to get quizzes"))});return"break"}},c=0,e;c<a.length;c++){e=b(c);if("break"===e)break}}),j={attributes:!0,childList:!1,subtree:!0},k=function(){a.get_string("loading","local_assessfreq").then(function(a){b.create({type:b.types.DEFAULT,title:a,body:h,large:!0}).done(function(a){g=a;g.getRoot().on("click","#id_submitbutton",m);g.getRoot().on("click","#id_cancel",function(a){a.preventDefault();g.setBody(h);g.hide()})})}).catch(function(){Notification.exception(new Error("Failed to load string: loading"))})},l=function(b){if("undefined"==typeof b){b={}}var d={jsonformdata:JSON.stringify(b)};a.get_string("searchquiz","local_assessfreq").then(function(a){g.setTitle(a);g.setBody(c.loadFragment("local_assessfreq","new_base_form",f,d));var b=document.querySelectorAll("[data-region*=\"modal-container\"]")[0];i.observe(b,j)}).catch(function(){Notification.exception(new Error("Failed to load string: searchquiz"))})},m=function(a){a.preventDefault();var b=g.getRoot().find("form");window.console.log(b)},n=function(){l();g.show()};e.init=function(a){f=a;k();var b=document.getElementById("local-assessfreq-find-quiz");b.addEventListener("click",n)};return e});
//# sourceMappingURL=form_modal.min.js.map
