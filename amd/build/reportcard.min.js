define ("local_assessfreq/reportcard",["core/fragment","core/templates","core/notification","core/ajax"],function(a,b,c,d){var j={},k,l;function e(a,b){d.call([{methodname:"core_user_update_user_preferences",args:{preferences:[{type:a,value:b}]}}])[0].fail(function(){c.exception(new Error("Failed to update user preference"))})}function f(){var d=document.getElementById("local-assessfreq-assess-due-month"),e=d.getElementsByClassName("overlay-icon-container")[0],f=d.getElementsByClassName("chart-body")[0],g={data:JSON.stringify({year:l})};e.classList.remove("hide");a.loadFragment("local_assessfreq","get_assess_by_month",k,g).done(function(a){b.render("core/chart",{withtable:!0,chartdata:a}).done(function(a,c){e.classList.add("hide");b.replaceNodeContents(f,a,c)}).fail(function(){c.exception(new Error("Failed to load chart template."))})}).fail(function(){c.exception(new Error("Failed to load card year filter"))})}function g(){var d=document.getElementById("local-assessfreq-assess-by-activity"),e=d.getElementsByClassName("overlay-icon-container")[0],f=d.getElementsByClassName("chart-body")[0],g={data:JSON.stringify({year:l})};e.classList.remove("hide");a.loadFragment("local_assessfreq","get_assess_by_activity",k,g).done(function(a){b.render("core/chart",{withtable:!0,chartdata:a}).done(function(a,c){e.classList.add("hide");b.replaceNodeContents(f,a,c)}).fail(function(){c.exception(new Error("Failed to load chart template."))})}).fail(function(){c.exception(new Error("Failed to load card year filter"))})}function h(){var d=document.getElementById("local-assessfreq-assess-due-month-student"),e=d.getElementsByClassName("overlay-icon-container")[0],f=d.getElementsByClassName("chart-body")[0],g={data:JSON.stringify({year:l})};e.classList.remove("hide");a.loadFragment("local_assessfreq","get_assess_by_month_student",k,g).done(function(a){b.render("core/chart",{withtable:!0,chartdata:a}).done(function(a,c){e.classList.add("hide");b.replaceNodeContents(f,a,c)}).fail(function(){c.exception(new Error("Failed to load chart template."))})}).fail(function(){c.exception(new Error("Failed to load card year filter"))})}function i(a){var b=a.target;if("a"===b.tagName.toLowerCase()&&b.dataset.year!=l){l=b.dataset.year;e("local_assessfreq_overview_year_preference",l);var c=document.getElementById("local-assessfreq-report-overview").getElementsByClassName("local-assessfreq-year")[0];c.innerHTML=l;f();g();h()}}j.init=function(a){k=a;var b=document.getElementById("local-assessfreq-cards-year");l=b.getElementsByClassName("active")[0].dataset.year;b.addEventListener("click",i);f();g();h()};return j});
//# sourceMappingURL=reportcard.min.js.map
