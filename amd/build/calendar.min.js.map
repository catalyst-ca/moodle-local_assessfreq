{"version":3,"sources":["../src/calendar.js"],"names":["define","Str","Notification","Calendar","stringArr","key","component","stringResult","createTables","dateObj","Promise","resolve","window","console","log","generate","year","reject","Date","good","get_strings","catch","exception","Error","then","stringReturn","tree"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript for report card display and processing.\n *\n * @package    local_assessfreq\n * @copyright  2020 Matt Porritt <mattp@catalyst-au.net>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['core/str', 'core/notification'], function(Str, Notification) {\n\n    /**\n     * Module level variables.\n     */\n    var Calendar = {};\n    const stringArr = [\n        {key: 'sun', component: 'calendar'},\n        {key: 'mon', component: 'calendar'},\n        {key: 'tue', component: 'calendar'},\n        {key: 'wed', component: 'calendar'},\n        {key: 'thu', component: 'calendar'},\n        {key: 'fri', component: 'calendar'},\n        {key: 'sat', component: 'calendar'},\n        {key: 'jan', component: 'local_assessfreq'},\n        {key: 'feb', component: 'local_assessfreq'},\n        {key: 'mar', component: 'local_assessfreq'},\n        {key: 'apr', component: 'local_assessfreq'},\n        {key: 'may', component: 'local_assessfreq'},\n        {key: 'jun', component: 'local_assessfreq'},\n        {key: 'jul', component: 'local_assessfreq'},\n        {key: 'aug', component: 'local_assessfreq'},\n        {key: 'sep', component: 'local_assessfreq'},\n        {key: 'oct', component: 'local_assessfreq'},\n        {key: 'nov', component: 'local_assessfreq'},\n        {key: 'dec', component: 'local_assessfreq'},\n    ];\n    var stringResult;\n\n\n    const createTables = (dateObj) => {\n        return new Promise((resolve, reject) => {\n            /*stuff using username, password*/\n            window.console.log(dateObj);\n            var foo = 1;\n            if (foo == 1) {\n                resolve('foobar');\n            } else {\n                reject(Error(\"It broke\"));\n            }\n        });\n    };\n\n    /**\n     * Initialise method for report card rendering.\n     *\n     * @param {integer} context The current context id.\n     */\n    Calendar.generate = (year) => {\n        return new Promise((resolve, reject) => {\n            const dateObj = new Date(year, 0, 1);\n            var good = true;\n\n            Str.get_strings(stringArr).catch(function() { // Get required strings.\n                Notification.exception(new Error('Failed to load strings'));\n                good = false;\n                return;\n            }).then(stringReturn => { // Save string to global to be used later.\n                stringResult = stringReturn;\n                window.console.log(stringResult);\n                return dateObj;\n            }).then(createTables) // Create tables for calendar.\n            .then(tree => { // TODO: Fill tables with calendar data.\n                window.console.log(tree);\n                return;\n            }).then(() => { // Return the result of the generate function.\n                if (good == true) {\n                    resolve('Calender generate done');\n                } else {\n                    reject(Error('Could not generate calendar'));\n                }\n            });\n        });\n\n    };\n\n    return Calendar;\n});\n"],"file":"calendar.min.js"}