define ("local_assessfreq/dayview",["core/str","core/notification","core/modal_factory","local_assessfreq/modal_large","core/templates","core/ajax"],function(a,b,c,d,e,f){var g={},h,i=function(a){return new Promise(function(b){for(var c=JSON.parse(a),d=5/72,e=0;e<c.length;e++){var f=c[e].endyear,g=c[e].endmonth-1,h=c[e].endday,j=new Date(f,g,h).getTime()/1e3,k=c[e].timestart-j,l=0,m=0;if(0>=k){k=0;m=(c[e].timeend-j)/60*d;window.console.log(m)}else{l=k/60*d;m=(c[e].timeend-c[e].timestart)/60*d}if(100<l+m){m=100-l}c[e].leftmargin=l;c[e].width=m;window.console.log(c[e])}b(c)})};g.display=function(a){var c=JSON.stringify({date:a,modules:["all"]});f.call([{methodname:"local_assessfreq_get_day_events",args:{jsondata:c}}])[0].then(i).then(function(a){h.setBody(e.render("local_assessfreq/dayview",{rows:a}));h.show()}).fail(function(){b.exception(new Error("Failed to load day view"))});h.setBody(e.render("local_assessfreq/dayview",{}));h.show()};g.init=function(){a.get_string("loading","core").then(function(a){c.create({type:d.TYPE,title:a,body:"<p class=\"text-center\"><i class=\"fa fa-spinner fa-pulse fa-2x fa-fw\"></i></p>"}).done(function(a){h=a})}).catch(function(){b.exception(new Error("Failed to load string: loading"))})};return g});
//# sourceMappingURL=dayview.min.js.map
