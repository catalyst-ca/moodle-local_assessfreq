{"version":3,"sources":["../src/dashboard_quiz.js"],"names":["define","FormModal","Ajax","Notification","Str","DashboardQuiz","selectQuizStr","processDashboard","quiz","titleElement","document","getElementById","innerHTML","call","methodname","args","quizid","then","response","quizArray","JSON","parse","cardsElement","trendElement","summaryElement","summarySpinner","getElementsByClassName","name","timeopen","timeclose","timelimit","earlyopen","lateclose","participants","overrideparticipants","questioncount","typecount","classList","remove","add","window","console","log","fail","exception","Error","init","contextid","get_string","str","catch"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript for report card display and processing.\n *\n * @package    local_assessfreq\n * @copyright  2020 Matt Porritt <mattp@catalyst-au.net>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['local_assessfreq/form_modal', 'core/ajax', 'core/notification', 'core/str'],\nfunction(FormModal, Ajax, Notification, Str) {\n\n    /**\n     * Module level variables.\n     */\n    var DashboardQuiz = {};\n    var selectQuizStr = '';\n\n    /**\n     * Callback function that is called when a quiz is selected from the form.\n     * Starts the processing of the dashbaord.\n     */\n    const processDashboard = function(quiz) {\n        let titleElement = document.getElementById('local-assessfreq-quiz-title');\n        titleElement.innerHTML = selectQuizStr;\n        // Get quiz data.\n        Ajax.call([{\n            methodname: 'local_assessfreq_get_quiz_data',\n            args: {\n                quizid: quiz\n            },\n        }])[0].then((response) => {\n\n            let quizArray = JSON.parse(response);\n            let cardsElement = document.getElementById('local-assessfreq-quiz-dashboard-cards-deck');\n            let trendElement = document.getElementById('local-assessfreq-quiz-dashboard-participant-trend-deck');\n            let summaryElement = document.getElementById(\"local-assessfreq-quiz-summary-card\");\n            let summarySpinner = summaryElement.getElementsByClassName('overlay-icon-container')[0];\n\n            titleElement.innerHTML = quizArray.name;\n\n            // Populate quiz summary card with details.\n            document.getElementById('quiz-time-open').innerHTML = quizArray.timeopen;\n            document.getElementById('quiz-time-close').innerHTML = quizArray.timeclose;\n            document.getElementById('quiz-time-limit').innerHTML = quizArray.timelimit;\n            document.getElementById('quiz-time-earlyopen').innerHTML = quizArray.earlyopen;\n            document.getElementById('quiz-time-lateclose').innerHTML = quizArray.lateclose;\n            document.getElementById('quiz-participants').innerHTML = quizArray.participants;\n            document.getElementById('quiz-participants-override').innerHTML = quizArray.overrideparticipants;\n            document.getElementById('quiz-question-number').innerHTML = quizArray.questioncount;\n            document.getElementById('quiz-question-types').innerHTML = quizArray.typecount;\n\n            // Show the cards.\n            cardsElement.classList.remove('hide');\n            trendElement.classList.remove('hide');\n            summarySpinner.classList.add('hide');\n\n            window.console.log(quizArray);\n            return;\n        }).fail(() => {\n            Notification.exception(new Error('Failed to get quiz data'));\n        });\n    };\n\n    /**\n     * Initialise method for quiz dashboard rendering.\n     */\n    DashboardQuiz.init = function(contextid) {\n        FormModal.init(contextid, processDashboard);\n\n        Str.get_string('loadingquiztitle', 'assessfreq').then((str) => {\n            selectQuizStr = str;\n        }).catch(() => {\n            Notification.exception(new Error('Failed to load string: loadingquiz'));\n        });\n    };\n\n    return DashboardQuiz;\n});\n"],"file":"dashboard_quiz.min.js"}