{"version":3,"sources":["../src/dashboard_quiz_inprogress.js"],"names":["define","Ajax","Templates","DashboardQuizInprogress","contextid","processDashboard","call","methodname","args","then","response","quizSummary","JSON","parse","summaryElement","document","getElementById","summarySpinner","getElementsByClassName","classList","remove","window","console","log","render","done","html","add","contentcontainer","replaceNodeContents","fail","Notification","exception","Error","init","context"],"mappings":"AAuBAA,OAAM,8CAAC,CAAC,WAAD,CAAc,gBAAd,CAAD,CACN,SAASC,CAAT,CAAeC,CAAf,CAA0B,IAKlBC,CAAAA,CAAuB,CAAG,EALR,CAMlBC,CANkB,CAWhBC,CAAgB,CAAG,UAAW,CAEhCJ,CAAI,CAACK,IAAL,CAAU,CAAC,CACPC,UAAU,CAAE,wCADL,CAEPC,IAAI,CAAE,EAFC,CAAD,CAAV,EAGI,CAHJ,EAGOC,IAHP,CAGY,SAACC,CAAD,CAAc,IAClBC,CAAAA,CAAW,CAAGC,IAAI,CAACC,KAAL,CAAWH,CAAX,CADI,CAElBI,CAAc,CAAGC,QAAQ,CAACC,cAAT,CAAwB,yDAAxB,CAFC,CAGlBC,CAAc,CAAGH,CAAc,CAACI,sBAAf,CAAsC,wBAAtC,EAAgE,CAAhE,CAHC,CAKtBJ,CAAc,CAACK,SAAf,CAAyBC,MAAzB,CAAgC,MAAhC,EAEAC,MAAM,CAACC,OAAP,CAAeC,GAAf,CAAmBZ,CAAnB,EACAU,MAAM,CAACC,OAAP,CAAeC,GAAf,CAAmBT,CAAnB,EAGAZ,CAAS,CAACsB,MAAV,CAAiB,iEAAjB,CAAoFb,CAApF,EACCc,IADD,CACM,SAACC,CAAD,CAAU,CACZT,CAAc,CAACE,SAAf,CAAyBQ,GAAzB,CAA6B,MAA7B,EAEA,GAAIC,CAAAA,CAAgB,CAAGb,QAAQ,CAACC,cAAT,CAAwB,iEAAxB,CAAvB,CACAd,CAAS,CAAC2B,mBAAV,CAA8BD,CAA9B,CAAgDF,CAAhD,CACH,CAND,EAMGI,IANH,CAMQ,UAAM,CACVC,YAAY,CAACC,SAAb,CAAuB,GAAIC,CAAAA,KAAJ,CAAU,uCAAV,CAAvB,CAEH,CATD,CAYH,CA1BD,EA0BGH,IA1BH,CA0BQ,UAAM,CACVC,YAAY,CAACC,SAAb,CAAuB,GAAIC,CAAAA,KAAJ,CAAU,iCAAV,CAAvB,CACH,CA5BD,CA6BH,CA1CqB,CA+CtB9B,CAAuB,CAAC+B,IAAxB,CAA+B,SAASC,CAAT,CAAkB,CAC7C/B,CAAS,CAAG+B,CAAZ,CACAd,MAAM,CAACC,OAAP,CAAeC,GAAf,CAAmBnB,CAAnB,EAEAC,CAAgB,EAEnB,CAND,CAQA,MAAOF,CAAAA,CACV,CAzDK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript for quizzes in progress display and processing.\n *\n * @package    local_assessfreq\n * @copyright  2020 Matt Porritt <mattp@catalyst-au.net>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['core/ajax', 'core/templates'],\nfunction(Ajax, Templates) {\n\n    /**\n     * Module level variables.\n     */\n    var DashboardQuizInprogress = {};\n    var contextid;\n\n    /**\n     * Starts the processing of the dashboard.\n     */\n    const processDashboard = function() {\n        // Get summary quiz data.\n        Ajax.call([{\n            methodname: 'local_assessfreq_get_inprogress_counts',\n            args: {},\n        }])[0].then((response) => {\n            let quizSummary = JSON.parse(response);\n            let summaryElement = document.getElementById('local-assessfreq-quiz-dashboard-inprogress-summary-card');\n            let summarySpinner = summaryElement.getElementsByClassName('overlay-icon-container')[0];\n\n            summaryElement.classList.remove('hide'); // Show the card.\n\n            window.console.log(quizSummary);\n            window.console.log(summaryElement);\n\n            // Populate summary card with details.\n            Templates.render('local_assessfreq/quiz-dashboard-inprogress-summary-card-content', quizSummary)\n            .done((html) => {\n                summarySpinner.classList.add('hide');\n\n                let contentcontainer = document.getElementById('local-assessfreq-quiz-dashboard-inprogress-summary-card-content');\n                Templates.replaceNodeContents(contentcontainer, html);\n            }).fail(() => {\n                Notification.exception(new Error('Failed to load quiz summary template.'));\n                return;\n            });\n\n            return;\n        }).fail(() => {\n            Notification.exception(new Error('Failed to get quiz summary data'));\n        });\n    };\n\n    /**\n     * Initialise method for quizzes in progress dashboard rendering.\n     */\n    DashboardQuizInprogress.init = function(context) {\n        contextid = context;\n        window.console.log(contextid);\n\n        processDashboard();\n\n    };\n\n    return DashboardQuizInprogress;\n});\n"],"file":"dashboard_quiz_inprogress.min.js"}