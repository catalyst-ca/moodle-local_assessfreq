define ("local_assessfreq/override_modal",["jquery","core/str","core/modal_factory","core/modal_events","core/fragment","core/ajax"],function(a,b,c,d,e,f){var h={},i,j,k,l,m,n,o="<p class=\"text-center\"><i class=\"fa fa-circle-o-notch fa-spin fa-3x fa-fw\"></i></p>",p=function(){b.get_string("loading","local_assessfreq").then(function(a){c.create({type:c.types.DEFAULT,title:a,body:o,large:!0}).done(function(a){j=a;j.getRoot().on("click","#id_submitbutton",g);j.getRoot().on("click","#id_cancel",function(a){a.preventDefault();j.setBody(o);j.hide()})})}).catch(function(){Notification.exception(new Error("Failed to load string: loading"))})},q=function(a,c,d){if("undefined"==typeof d){d={}}var f={jsonformdata:JSON.stringify(d),quizid:a,userid:c};j.setBody(o);b.get_string("useroverride","local_assessfreq").then(function(a){j.setTitle(a);j.setBody(e.loadFragment("local_assessfreq","new_override_form",i,f))}).catch(function(){Notification.exception(new Error("Failed to load string: useroverride"))})};function g(b){b.preventDefault();var c=j.getRoot().find("form").serialize(),d=JSON.stringify(c),e=a.merge(j.getRoot().find("[aria-invalid=\"true\"]"),j.getRoot().find(".error"));if(e.length){e.first().focus();return}f.call([{methodname:"local_assessfreq_process_override_form",args:{jsonformdata:d,quizid:l}}])[0].done(function(){j.setBody(o);j.hide();if(n){k(l,n)}else{k(l)}}).fail(function(){q(l,m,c)})}h.displayModalForm=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;l=a;m=b;n=c;q(a,b);j.show()};h.init=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;i=a;k=b;n=c;p()};return h});
//# sourceMappingURL=override_modal.min.js.map
